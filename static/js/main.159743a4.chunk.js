(this.webpackJsonpVersus=this.webpackJsonpVersus||[]).push([[0],{287:function(e,t,n){},293:function(e){e.exports=JSON.parse('{"contractName":"Prediction","abi":[{"inputs":[{"internalType":"address","name":"_devFund","type":"address"},{"internalType":"address","name":"_nyanRewards","type":"address"},{"internalType":"address","name":"_versusRewards","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"closePrediction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"pair","type":"address"},{"internalType":"string","name":"marketName","type":"string"}],"name":"createMarket","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"devFund","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"eachMarketData","outputs":[{"internalType":"string","name":"marketName","type":"string"},{"internalType":"uint256","name":"startBlock","type":"uint256"},{"internalType":"uint256","name":"expirationBlock","type":"uint256"},{"internalType":"int256","name":"currentRound","type":"int256"},{"internalType":"int256","name":"targetPrice","type":"int256"},{"internalType":"uint256","name":"ETHLong","type":"uint256"},{"internalType":"uint256","name":"ETHShort","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pair","type":"address"}],"name":"expire","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"pair","type":"address"}],"name":"getLatestPrice","outputs":[{"internalType":"int256","name":"","type":"int256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"market","type":"address"}],"name":"getMarketDetails","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"int256","name":"","type":"int256"},{"internalType":"int256","name":"","type":"int256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarkets","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"ETHAmount","type":"uint256"}],"name":"handleFees","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"markets","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nyanRewards","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pair","type":"address"},{"internalType":"bool","name":"isLonging","type":"bool"}],"name":"predict","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_versus","type":"address"}],"name":"setVersus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userPrediction","outputs":[{"internalType":"address","name":"pair","type":"address"},{"internalType":"int256","name":"price","type":"int256"},{"internalType":"int256","name":"round","type":"int256"},{"internalType":"uint256","name":"ETHUsed","type":"uint256"},{"internalType":"bool","name":"isLonging","type":"bool"},{"internalType":"uint256","name":"expirationBlock","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"versusContract","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"versusRewards","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}')},303:function(e,t,n){},317:function(e,t){},340:function(e,t){},342:function(e,t){},418:function(e,t){},420:function(e,t){},452:function(e,t){},457:function(e,t){},459:function(e,t){},466:function(e,t){},479:function(e,t){},560:function(e,t){},718:function(e){e.exports=JSON.parse("{}")},726:function(e,t,n){},727:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"createInstance",(function(){return E})),n.d(r,"getInstance",(function(){return B}));var a={};n.r(a),n.d(a,"getCurrentAccount",(function(){return A}));var s={};n.r(s),n.d(s,"getVersusMarkets",(function(){return F})),n.d(s,"getMarketDetails",(function(){return V})),n.d(s,"getUserPrediction",(function(){return R})),n.d(s,"getCurrentPairPrice",(function(){return J})),n.d(s,"makePrediction",(function(){return $})),n.d(s,"expireMarket",(function(){return K})),n.d(s,"closePrediction",(function(){return X}));var i=n(5),c=n(3),u=n.n(c),o=n(289),p=n.n(o),d=(n(303),n(63)),l=n(732),m=n(95),b=n(20),f=n(4),y=n.n(f),h=n(17),x=n(8),j=n(9),v=n(14),k=n(13),g=n(42),O=n.n(g),w=n(292),T=n.n(w),P=n(112),N=n.n(P),M=n(46),E=function(){var e=Object(h.a)(y.a.mark((function e(){var t,n,r,a,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C(),n=H(t),r=!1,e.prev=3,e.next=6,n.connect();case 6:r=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),console.log("exception thrown while instantiating web3modal"),console.log(e.t0),e.abrupt("return",!1);case 14:return a=new O.a(r),e.next=17,a.eth.getAccounts();case 17:return s=e.sent,I(a,s,n),e.abrupt("return",a);case 20:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),C=function(){return{walletconnect:{package:N.a,options:{infuraId:"83301e4b4e234662b7769295c0f4a2e1"}}}},H=function(e){return new T.a({network:"mainnet",cacheProvider:!0,providerOptions:e,theme:{background:"rgb(253, 250, 250)",main:"rgb(33, 37, 41)",secondary:"rgb(136, 136, 136)",border:"rgba(195, 195, 195, 0.14)",hover:"rgb(252,163,220)"}})},B=function(){var e=Object(h.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(M.getGlobal)().web3Instance){e.next=5;break}return e.next=4,E();case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e,t,n){Object(M.setGlobal)({web3Instance:e,accounts:t,web3Modal:n})},A=function(){var e=Object(h.a)(y.a.mark((function e(){var t,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(M.getGlobal)().accounts){e.next=10;break}return e.next=4,r.getInstance();case 4:if(!(n=e.sent)){e.next=10;break}return e.next=8,n.eth.getAccounts();case 8:return a=e.sent,e.abrupt("return",a[0]);case 10:return console.log(t[0]),e.abrupt("return",t[0]);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=(n(718),n(293)),W="0xD1941ABd389b5Ca4EbdA34c987a4d1245909F45c";function L(){return D.apply(this,arguments)}function D(){return(D=Object(h.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.predictionCI,e.next=3,r.getInstance();case 3:return t=e.sent,console.log(W),window.predictionCI=new t.eth.Contract(S.abi,W),e.abrupt("return",window.predictionCI);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return U.apply(this,arguments)}function U(){return(U=Object(h.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCurrentAccount();case 2:return e.sent,e.next=5,L();case 5:return t=e.sent,e.next=8,t.methods.getMarkets().call();case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return G.apply(this,arguments)}function G(){return(G=Object(h.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCurrentAccount();case 2:return e.sent,e.next=5,L();case 5:return n=e.sent,e.next=8,n.methods.getMarketDetails(t).call();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return _.apply(this,arguments)}function _(){return(_=Object(h.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCurrentAccount();case 2:return t=e.sent,e.next=5,L();case 5:return n=e.sent,e.next=8,n.methods.userPrediction(t).call();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return z.apply(this,arguments)}function z(){return(z=Object(h.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:return n=e.sent,e.next=5,n.methods.getLatestPrice(t).call();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,n){return q.apply(this,arguments)}function q(){return(q=Object(h.a)(y.a.mark((function e(t,n,r){var s,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCurrentAccount();case 2:return s=e.sent,e.next=5,L();case 5:return i=e.sent,e.next=8,i.methods.predict(t,r).send({from:s,value:n});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(h.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCurrentAccount();case 2:return n=e.sent,e.next=5,L();case 5:return r=e.sent,e.next=8,r.methods.expire(t).send({from:n});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return Y.apply(this,arguments)}function Y(){return(Y=Object(h.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCurrentAccount();case 2:return t=e.sent,e.next=5,L();case 5:return n=e.sent,e.next=8,n.methods.closePrediction().send({from:t});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c.Component;var Z=function(e){Object(v.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(x.a)(this,n);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).state={myETHBalance:0,userHasPrediction:!1,userPredictionExp:0,userPredictionPair:"",userPredictionPrice:0,userPredictionPosition:!1,markets:[],currentBlock:0},e.componentDidMount=Object(h.a)(y.a.mark((function t(){var n,i,c,u,o,p;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new O.a(new O.a.providers.HttpProvider("https://kovan.infura.io/v3/6162d64a9204425eb2dbe20e893c85d0")),console.log(r.getInstance()),t.next=4,a.getCurrentAccount();case 4:return i=t.sent,t.t0=e,t.t1=n.utils,t.next=9,n.eth.getBalance(i);case 9:return t.t2=t.sent,t.t3=t.t1.fromWei.call(t.t1,t.t2),t.t4={myETHBalance:t.t3},t.t0.setState.call(t.t0,t.t4),t.next=15,s.getVersusMarkets();case 15:c=t.sent,u=[],o=0;case 18:if(!(o<c.length)){t.next=27;break}return t.next=21,s.getMarketDetails(c[o]);case 21:p=t.sent,u.push({address:c[o],name:p[6],startblock:p[0],endblock:p[1],currentround:p[2],targetprice:p[3],ETHLong:n.utils.fromWei(p[4]),ETHShort:n.utils.fromWei(p[5])}),console.log(p[1]);case 24:o++,t.next=18;break;case 27:return e.setState({markets:u}),t.t5=e,t.next=31,n.eth.getBlockNumber();case 31:return t.t6=t.sent,t.t7={currentBlock:t.t6},t.t5.setState.call(t.t5,t.t7),console.log(e.state.currentBlock),t.next=37,e.hasUserPredicted();case 37:case"end":return t.stop()}}),t)}))),e.makePrediction=function(){var e=Object(h.a)(y.a.mark((function e(t,n,r){var a,i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new O.a,"long"==r?(i=document.getElementById("long-input-"+t).value,s.makePrediction(n,a.utils.toWei(i.toString()),!0)):(c=document.getElementById("short-input-"+t).value,s.makePrediction(n,a.utils.toWei(c.toString()),!1));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),e.expireMarket=function(){var e=Object(h.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.expireMarket(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.closeUserPrediction=Object(h.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.closePrediction();case 1:case"end":return e.stop()}}),e)}))),e.isUserWinning=Object(h.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.next=3,s.getCurrentPairPrice(e.state.userPredictionPair);case 3:return t.sent>e.state.userPredictionPrice?e.state.userPredictionPosition||(n=!0):e.state.userPredictionPosition&&(n=!0),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),e.hasUserPredicted=Object(h.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.getUserPrediction();case 2:n=t.sent,console.log(n),"0x0000000000000000000000000000000000000000"===n[0]?e.setState({userHasPrediction:!1}):e.setState({userHasPrediction:!0,userPredictionPair:n[0],userPredictionExp:n[5],userPredictionPosition:n[4]});case 5:case"end":return t.stop()}}),t)}))),e}return Object(j.a)(n,[{key:"formatPrice",value:function(e,t){var n=new O.a(new O.a.providers.HttpProvider("https://kovan.infura.io/v3/6162d64a9204425eb2dbe20e893c85d0"));if(" ETH"==e.split("/")[1])return n.utils.fromWei(t.toString())+" ETH"}},{key:"populateMarkets",value:function(){for(var e=this,t=[],n=function(n){t.push(Object(i.jsxs)("div",{className:"each-market",children:[Object(i.jsx)("div",{className:"market-name",children:e.state.markets[n].name}),Object(i.jsxs)("div",{className:"market-target",children:["Target Price:",Object(i.jsx)("span",{className:"target-price",children:e.formatPrice(e.state.markets[n].name,e.state.markets[n].targetprice)})]}),e.state.currentBlock>e.state.markets[n].endblock?Object(i.jsx)("div",{onClick:function(){return e.expireMarket(e.state.markets[n].address)},className:"market-expired",children:"Expire!"}):Object(i.jsxs)("div",{className:"market-expiration",children:["Expires in: ",e.state.markets[n].endblock-e.state.currentBlock," blocks"]}),Object(i.jsxs)("div",{className:"predict-container",children:[Object(i.jsxs)("div",{className:"short-box",children:[Object(i.jsx)("input",{id:"short-input-"+n,placeholder:"Enter ETH to stake",type:"number",className:"predict-input"}),Object(i.jsx)("div",{onClick:function(){return e.makePrediction(n,e.state.markets[n].address,"short")},id:"short-button-"+n,className:"short-button",children:"SHORT"}),Object(i.jsxs)("div",{className:"ETH-pooled",children:[e.state.markets[n].ETHShort," ETH pooled"]})]}),Object(i.jsxs)("div",{className:"long-box",children:[Object(i.jsx)("input",{id:"long-input-"+n,placeholder:"Enter ETH to stake",type:"number",className:"predict-input"}),Object(i.jsx)("div",{onClick:function(){return e.makePrediction(n,e.state.markets[n].address,"long")},id:"long-button-"+n,className:"short-button",children:"LONG"}),Object(i.jsxs)("div",{className:"ETH-pooled",children:[e.state.markets[n].ETHLong," ETH pooled"]})]})]})]}))},r=0;r<this.state.markets.length;r++)n(r);return t}},{key:"render",value:function(){return Object(i.jsxs)("div",{className:"predict-body",children:[Object(i.jsx)("div",{className:"my-versus",children:"My Versus: 0"}),Object(i.jsxs)("div",{className:"my-ETH",children:["ETH in Wallet: ",this.state.myETHBalance]}),Object(i.jsx)("a",{className:"profit-href",target:"_blank",href:"https://nyanfinance.medium.com/versus-decentralized-price-prediction-markets-91a88fcbc0aa",children:Object(i.jsx)("div",{className:"how-to-profit",children:"What is Versus?"})}),Object(i.jsx)("h2",{className:"market-header",children:"Markets"}),Object(i.jsx)("div",{className:"divider"}),this.state.userHasPrediction?Object(i.jsxs)("div",{className:"each-market",children:[Object(i.jsx)("div",{className:"market-name",children:"My Active Prediction"}),Object(i.jsx)("div",{className:"market-name",children:"Pair Name: ETH/???"}),Object(i.jsxs)("div",{className:"market-target",children:["Target Price: ",Object(i.jsx)("span",{className:"target-price",children:"$0"})]}),this.state.currentBlock>this.state.userPredictionExp?Object(i.jsx)("div",{className:"market-expired",children:"Expire!"}):Object(i.jsxs)("div",{className:"market-expiration",children:["Expires in: ",this.state.userPredictionExp-this.state.currentBlock," blocks"]}),Object(i.jsx)("div",{className:"prediction-status",children:this.isUserWinning()?Object(i.jsx)("div",{className:"user-winning",children:Object(i.jsx)("div",{className:"p-s-text",children:"Currently Winning!"})}):Object(i.jsx)("div",{className:"user-losing",children:Object(i.jsx)("div",{className:"p-s-text",children:"Currently Losing"})})})]}):null,this.populateMarkets()]})}}]),n}(c.Component),ee=function(e){var t=Object(M.useGlobal)("web3Instance");Object(m.a)(t,1)[0];return Object(i.jsxs)("div",{className:"application-body",children:[Object(i.jsx)(b.a,{exact:!0,path:"/",component:Z}),Object(i.jsx)(b.a,{exact:!0,path:"/predict",component:Z})]})},te=(n(726),n(287),function(e){var t=Object(M.useGlobal)("web3Instance"),n=Object(m.a)(t,1)[0],s=Object(c.useState)(0),u=Object(m.a)(s,2),o=u[0],p=u[1];function l(){return b.apply(this,arguments)}function b(){return(b=Object(h.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createInstance();case 2:if(!e.sent){e.next=9;break}return e.t0=p,e.next=7,a.getCurrentAccount();case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){function e(){return(e=Object(h.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(),!n){e.next=5;break}return e.next=4,a.getCurrentAccount();case 4:e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(i.jsxs)("div",{className:"nav-bg",children:[Object(i.jsx)(d.b,{to:"/",className:"router-link",children:Object(i.jsx)("h1",{className:"site-title",children:"Versus"})}),o?Object(i.jsxs)("div",{className:"menu-icon",children:["Wallet:...",o.substring(o.length-8),Object(i.jsx)("div",{onClick:function(){},className:"disconnect"})]}):Object(i.jsx)("div",{onClick:function(){return l()},className:"menu-icon",children:"Connect To Wallet"})]})}),ne=function(){return Object(i.jsx)(l.a,{fluid:!0,children:Object(i.jsxs)(d.a,{children:[Object(i.jsx)(te,{}),Object(i.jsx)(ee,{})]})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,733)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))};p.a.render(Object(i.jsx)(u.a.StrictMode,{children:Object(i.jsx)(ne,{})}),document.getElementById("root")),re()}},[[727,1,2]]]);
//# sourceMappingURL=main.159743a4.chunk.js.map